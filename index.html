<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>ONLINE/OFFLINE</title>
	<meta name="author" content="osoba">
	<meta name="description" content="description here">
	<meta name="keywords" content="keywords,here">
	<link rel="shortcut icon" href="data:image/png;base64,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">
	<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans' type='text/css'>
	<link rel='stylesheet' href='./ball-pulse.min.css' type='text/css'>
	<link rel='stylesheet' href='./style.css' type='text/css'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<meta name="viewport" content="width=450px" >
</head>

<body>
	<noscript>
		<div class="text">Ta strona do działania wymaga JavaScript.</div>
	</noscript>
	<div class="hide text">DUPA</div>
	<table id="tabela" class="hide">
		<tr>
			<th>
				Host
			</th>
			<th>
				Status
			</th>
		</tr>
	</table>
	
	<script>	
		var sites = ["zsbi.pl", "www.zsbi.internetdsl.pl", "cufs.vulcan.net.pl", "uonetplus.vulcan.net.pl", "google.com", "google.pl", "youtube.pl", "youtube.com", "facebook.com", "reddit.com", "wykop.pl", "shinden.pl"];
		var i = 0;
		
		sites.forEach(function(entry) {
			$('#tabela').find('tbody:last').append('<tr><td id="' + 'host' + i + '">' + entry + '</td><td class="status"><div id="status' + i + '"><div class="la-ball-pulse"><div></div><div></div><div></div></div></div></td></tr>');
			i++;
		});
		
		function changeStatus(indexOfStatus, className, text) {
			var id = "#status" + indexOfStatus;
			$(id).fadeOut(200, function(){
								$(id).html(text);
								$(id).attr("class", className);
								$(id).fadeIn(200);
							});
		}
		
		var sprawdzonoIlosc = 0;
		var offlineIlosc = 0;
		function Site (domain, index) {
			this.domain = domain;
			this.index = index;
			Site.prototype.xmlhttp = new XMLHttpRequest();
			var parentThis = this;
			this.run = function() {
				this.xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4) 
					{
						if(this.status == 200) {
							var resp = this.responseText;
							if(resp == "true") {
								changeStatus(parentThis.index, 'online', 'ONLINE');
							}
							else {
								changeStatus(parentThis.index, 'offline', 'OFFLINE');
								offlineIlosc++;
							}
							sprawdzonoIlosc++;
							if(sprawdzonoIlosc == sites.length) {
								if(offlineIlosc == 0) {
									$(".text").html("Bomba, wszystko stoi na baczność.");
								}
								else {
									$(".text").html("Coś umarło :(");
								}
								$(".text").toggleClass("hide");
							}
						}
						else {
							console.log("SERVER ERROR -" + this.status + "- while checking " + parentThis.domain);
							changeStatus(parentThis.index, 'error', 'ERROR');
						}
					}
				}
				this.xmlhttp.open("GET", "http://cookiezcreations.ovh/isup.php?host=" + this.domain, true);
				//this.xmlhttp.setRequestHeader("Status-Id", "status" + this.index);
				this.xmlhttp.send();
			}
		}
		
		var Sites = [];
		for (y = 0; y < i; y++) { 
			var domena = $("#host" + y).text();
			console.log("PRZETWARZANIE: " + domena);
			Sites.push(new Site(domena, y));
			Sites[y].run();
		}
		
		setTimeout(function() {
			$("#tabela").toggleClass("hide");
		}, 100);
		
		function addInputbox() {
			$('#tabela').find('tbody:last').append('<tr><td><input id="input-input" type="text" name="website" placeholder="Wpisz tu adres strony."></input></td><td><button id="input-accept" type="button" onclick="replaceInputBox()">Dodaj</button></td></tr>');
		}
		
		function replaceInputBox() {
			var domena = $("#input-input").val();	
			
			$('#tabela').find('tr:last').replaceWith('<tr><td id="' + 'host' + i + '">' + domena + '</td><td class="status"><div id="status' + i + '"><div class="la-ball-pulse"><div></div><div></div><div></div></div></div></td></tr>');
			
			console.log("PRZETWARZANIE: " + domena);
			Sites.push(new Site(domena, i));
			Sites[i].run();
			
			i++;
			
			addInputbox();
		}
		
		addInputbox();
	</script>
</body>

</html>
